<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Apple Trivia Battle</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial;
      background: #f2f2f7;
      margin: 0;
      padding: 20px;
      text-align: center;
    }

    h1 {
      font-size: 3rem;
      color: #111;
      backdrop-filter: blur(20px);
      padding: 10px;
      border-radius: 20px;
      animation: pop 0.5s ease;
    }
    @keyframes pop { 0% { transform: scale(.6); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }

    .question-box {
      background: rgba(255,255,255,0.6);
      backdrop-filter: blur(25px) saturate(180%);
      padding: 25px;
      margin: 20px auto;
      max-width: 650px;
      border-radius: 25px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      font-size: 1.4rem;
      animation: fadeIn .4s ease;
    }
    @keyframes fadeIn { from {opacity:0;} to {opacity:1;} }

    .choice {
      background: rgba(255,255,255,0.7);
      backdrop-filter: blur(20px);
      border: 1px solid #ddd;
      color: #111;
      padding: 12px;
      margin: 12px auto;
      max-width: 300px;
      border-radius: 14px;
      cursor: pointer;
      font-size: 1.1rem;
      transition: .15s;
    }
    .choice:hover { transform: scale(1.05); background: white; }

    .btn {
      background: black;
      color: white;
      padding: 12px 22px;
      border-radius: 14px;
      cursor: pointer;
      margin: 10px;
      font-size: 1rem;
      transition: .2s;
    }
    .btn:hover { background: #333; }

    #menuInput {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 10px;
      font-size: 1rem;
      border-radius: 8px;
      border: 1px solid #ccc;
      width: 120px;
    }
  </style>
</head>
<body>
  <h1>üçé Apple Trivia Battle</h1>

  <input type="text" id="menuInput" placeholder="Type 'Secret'">

  <audio id="correctSound" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>
  <audio id="wrongSound" src="https://actions.google.com/sounds/v1/cartoon/cartoon_boing.ogg"></audio>

  <canvas id="confettiCanvas" style="position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none;"></canvas>

  <div id="game">
    <div class="question-box" id="questionBox">Press Start to begin!</div>
    <div id="choices"></div>
    <button onclick="startNormal()" class="btn">Start</button>
  </div>

  <script>
    const normalQuestions = [];
    const secretQuestions = [];

    // Generate 20 sample normal questions
    for(let i=1;i<=20;i++) {
      normalQuestions.push({
        q: `Normal Question ${i}?`,
        c: [`Option A`, `Option B`, `Option C`, `Option D`],
        a: Math.floor(Math.random()*4)
      });
    }

    // Generate 20 sample secret questions (ultra easy)
    for(let i=1;i<=20;i++) {
      secretQuestions.push({
        q: `Secret Easy Question ${i}?`,
        c: [`Apple`, `Banana`, `Orange`, `Pineapple`],
        a: 0
      });
    }

    let index = 0;
    let currentSet = normalQuestions;

    function startNormal() {
      index = 0;
      currentSet = normalQuestions;
      nextQuestion();
    }

    function nextQuestion() {
      const box = document.getElementById("questionBox");
      const choicesDiv = document.getElementById("choices");

      if (index >= currentSet.length) {
        box.textContent = "üéâ All done! Type 'Secret' in the menu to try Secret Mode!";
        choicesDiv.innerHTML = "";
        return;
      }

      const q = currentSet[index];
      box.textContent = q.q;
      choicesDiv.innerHTML = "";

      q.c.forEach((choice, i) => {
        const btn = document.createElement("div");
        btn.className = "choice";
        btn.textContent = choice;
        btn.onclick = () => handleAnswer(i === q.a);
        choicesDiv.appendChild(btn);
      });
    }

    function handleAnswer(correct) {
      if(correct) { playCorrect(); startConfetti(); }
      else { playWrong(); }
      index++;
      setTimeout(nextQuestion, 400);
    }

    function playCorrect() { document.getElementById("correctSound").play(); }
    function playWrong() { document.getElementById("wrongSound").play(); }

    function startSecret() {
      index = 0;
      currentSet = secretQuestions;
      nextQuestion();
    }

    // Detect Secret Mode input
    document.getElementById('menuInput').addEventListener('keypress', function(e) {
      if(e.key === 'Enter' && this.value.trim().toLowerCase() === 'secret') {
        startSecret();
        this.value = '';
      }
    });

    // Confetti code
    const canvas = document.getElementById("confettiCanvas");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    function random(min,max){ return Math.random()*(max-min)+min; }
    let confettiParticles = [];
    function startConfetti(){
      for(let i=0;i<150;i++){
        confettiParticles.push({x:random(0,canvas.width),y:random(-50,-10),r:random(2,6),s:random(1,4),c:`hsl(${random(0,360)},100%,50%)`});
      }
      animateConfetti();
    }
    function animateConfetti(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      confettiParticles.forEach(p=>{
        p.y += p.s;
        ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fillStyle=p.c; ctx.fill();
      });
      confettiParticles = confettiParticles.filter(p=>p.y < canvas.height);
      if(confettiParticles.length>0) requestAnimationFrame(animateConfetti);
    }
  </script>
</body>
</html>
